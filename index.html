<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Bitcoin Miner Gamificado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      text-align: center;
    }

    h1 {
      margin-bottom: 30px;
    }

    .botao-minerar {
      width: 150px;
      cursor: pointer;
      transition: transform 0.1s ease;
      margin-top: 20px;
    }

    .botao-minerar.pressionado {
      transform: scale(0.92);
    }

    .botao-minerar.desativado {
      opacity: 0.4;
      pointer-events: none;
      transform: none !important;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    p {
      font-size: 18px;
    }
  </style>
</head>
<body>

  <h1>ðŸª™ Bitcoin Miner (Gamificado)</h1>

  <p><strong>Hashrate:</strong> <span id="hashrate">1</span></p>
  <p><strong>Satoshis minerados:</strong> <span id="satoshis">0</span></p>
  <p><strong>Cliques restantes hoje:</strong> <span id="cliques-restantes">100</span></p>

  <!-- Imagem de mineraÃ§Ã£o com tooltip dinÃ¢mico -->
  <img 
    src="bitcoin.png" 
    alt="Minerar" 
    class="botao-minerar"
    id="botaoMinerar"
    title="Clique para tentar minerar satoshis"
    onclick="minerar()" 
    onmousedown="pressionar(this)" 
    onmouseup="soltar(this)" 
    ontouchstart="pressionar(this)" 
    ontouchend="soltar(this)"
  >

  <br>

  <button onclick="comprarUpgrade()">Comprar Upgrade (100 satoshis)</button>

  <script>
    let satoshis = parseInt(localStorage.getItem("satoshis")) || 0;
    let hashrate = parseInt(localStorage.getItem("hashrate")) || 1;
    const LIMITE_CLIQUES_DIARIOS = 100;

    function getDataHoje() {
      const hoje = new Date();
      return hoje.toISOString().split("T")[0];
    }

    function getCliquesHoje() {
      const hoje = getDataHoje();
      const dataSalva = localStorage.getItem("dataUltimoClique");
      let cliques = parseInt(localStorage.getItem("cliquesHoje")) || 0;

      if (dataSalva !== hoje) {
        cliques = 0;
        localStorage.setItem("cliquesHoje", "0");
        localStorage.setItem("dataUltimoClique", hoje);
      }

      return cliques;
    }

    function minerar() {
      let cliques = getCliquesHoje();

      if (cliques >= LIMITE_CLIQUES_DIARIOS) {
        alert("VocÃª atingiu o limite de 100 mineraÃ§Ãµes hoje. Volte amanhÃ£!");
        return;
      }

      cliques++;
      localStorage.setItem("cliquesHoje", cliques);
      localStorage.setItem("dataUltimoClique", getDataHoje());

      const chance = 0.05 * hashrate;
      if (Math.random() < chance) {
        const ganhos = Math.floor(Math.random() * 5 + 1) * hashrate;
        satoshis += ganhos;
        alert(`VocÃª minerou ${ganhos} satoshis!`);
      } else {
        alert("Nada dessa vez... continue minerando!");
      }

      salvarProgresso();
      atualizarTela();
    }

    function comprarUpgrade() {
      const custo = 100;
      if (satoshis >= custo) {
        hashrate++;
        satoshis -= custo;
        alert("Upgrade comprado! Hashrate aumentado.");
        salvarProgresso();
        atualizarTela();
      } else {
        alert("Satoshis insuficientes para o upgrade.");
      }
    }

    function salvarProgresso() {
      localStorage.setItem("satoshis", satoshis);
      localStorage.setItem("hashrate", hashrate);
    }

    function atualizarTela() {
      document.getElementById("hashrate").textContent = hashrate;
      document.getElementById("satoshis").textContent = satoshis;

      const cliques = getCliquesHoje();
      const restantes = LIMITE_CLIQUES_DIARIOS - cliques;
      document.getElementById("cliques-restantes").textContent = restantes;

      const botao = document.getElementById("botaoMinerar");

      if (restantes <= 0) {
        botao.classList.add("desativado");
        botao.title = "VocÃª jÃ¡ minerou 100x hoje. Volte amanhÃ£!";
      } else {
        botao.classList.remove("desativado");
        botao.title = "Clique para tentar minerar satoshis";
      }
    }

    function pressionar(img) {
      if (!img.classList.contains("desativado")) {
        img.classList.add('pressionado');
      }
    }

    function soltar(img) {
      img.classList.remove('pressionado');
    }

    atualizarTela(); // Inicializar tela ao carregar
  </script>

</body>
</html>
